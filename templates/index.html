{% extends "base.html" %}

{% block content %}
<form class="search-form" method="GET">
    <input type="text" name="search" placeholder="Tìm kiếm sách theo tên hoặc tác giả..." value="{{ search }}">
    <button type="submit" class="btn">🔍 Tìm kiếm</button>
</form>

<div class="book-grid">
    {% for book in books %}
    <div class="book-card">
        <h3>{{ book.title }}</h3>
        <p><strong>Tác giả:</strong> {{ book.author }}</p>
        <p>{{ book.description[:100] }}{% if book.description|length > 100 %}...{% endif %}</p>
        <div class="price">{{ "{:,.0f}".format(book.price) }} đ</div>
        <p class="stock">Còn lại: {{ book.stock }} cuốn</p>
        {% if session.user_id %}
            <a href="{{ url_for('add_to_cart', book_id=book.id) }}" class="btn">🛒 Thêm vào giỏ</a>
        {% else %}
            <a href="{{ url_for('login') }}" class="btn">Đăng nhập để mua</a>
        {% endif %}
    </div>
    {% else %}
    <p>Không tìm thấy sách nào.</p>
    {% endfor %}
</div>
{% endblock %}