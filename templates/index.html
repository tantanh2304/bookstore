{% extends "base.html" %}

{% block content %}
<form class="search-form" method="GET">
    <input type="text" name="search" placeholder="TÃ¬m kiáº¿m sÃ¡ch theo tÃªn hoáº·c tÃ¡c giáº£..." value="{{ search }}">
    <button type="submit" class="btn"> TÃ¬m kiáº¿m</button>
</form>

<div class="book-grid">
    {% for book in books %}
    <div class="book-card">
        <img src="{{ book.image_url }}" alt="{{ book.title }}" class="book-image" 
             onerror="this.src='https://images.unsplash.com/photo-1543002588-bfa74002ed7e?w=400'">
        <h3>{{ book.title }}</h3>
        <p><strong>TÃ¡c giáº£:</strong> {{ book.author }}</p>
        <p>{{ book.description[:100] }}{% if book.description|length > 100 %}...{% endif %}</p>
        <div class="price">{{ "{:,.0f}".format(book.price) }} Ä‘</div>
        <p class="stock"> CÃ²n láº¡i: {{ book.stock }} cuá»‘n</p>
        {% if session.user_id %}
            <a href="{{ url_for('add_to_cart', book_id=book.id) }}" class="btn">ğŸ›’ ThÃªm vÃ o giá»</a>
        {% else %}
            <a href="{{ url_for('login') }}" class="btn">ÄÄƒng nháº­p Ä‘á»ƒ mua</a>
        {% endif %}
    </div>
    {% else %}
    <p style="grid-column: 1/-1; text-align: center; color: white; font-size: 1.2rem;">
        KhÃ´ng tÃ¬m tháº¥y sÃ¡ch nÃ o.
    </p>
    {% endfor %}
</div>
{% endblock %}